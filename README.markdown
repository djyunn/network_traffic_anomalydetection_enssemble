# 네트워크 트래픽 기반 이상 탐지 시스템

## 프로젝트 개요
이 프로젝트는 네트워크 트래픽 데이터를 분석하여 이상 패턴을 탐지하고, 탐지된 이상에 대해 공격 유형을 분류하는 시스템을 구현합니다.  
- **이상 탐지**: `Isolation Forest`, `One-Class SVM`, `Gaussian Mixture Model(GMM)`을 앙상블하여 비정상 패턴을 탐지합니다.  
- **공격 유형 분류**: `XGBoost`를 사용하여 탐지된 이상의 공격 유형을 분류합니다.  
- **데이터셋**: `NSL-KDD` 데이터셋을 활용하여 모델을 학습하고 평가합니다.  

프로젝트는 데이터 전처리, 이상 탐지, 분류, 성능 평가, 그리고 전체 프로세스를 실행하는 메인 파일로 구성되어 있습니다.

## 설치 방법
프로젝트를 실행하려면 아래 단계를 따라주세요:  
1. **필요한 라이브러리 설치**:  
   ```bash
   pip install pandas scikit-learn xgboost numpy scipy
   ```  
2. **데이터셋 준비**:  
   - `NSL-KDD` 데이터셋의 `KDDTrain+.txt`와 `KDDTest+.txt` 파일을 다운로드합니다.  
   - 다운로드한 파일을 프로젝트 디렉토리에 저장합니다.  

## 사용법
프로젝트를 실행하는 방법은 다음과 같습니다:  
1. 프로젝트 디렉토리에서 아래 명령어를 실행하여 전체 프로세스를 수행합니다:  
   ```bash
   python run.py
   ```  
2. 실행 시 다음 단계가 자동으로 진행됩니다:  
   - 데이터 로드 및 전처리  
   - 이상 탐지 모델 학습 및 예측  
   - `XGBoost`를 사용한 공격 유형 분류  
   - 성능 평가  

## 데이터셋
- **이름**: `NSL-KDD`  
- **설명**: 네트워크 침입 탐지 연구를 위한 데이터셋으로, 정상 트래픽과 다양한 공격 유형(`DoS`, `Probe`, `R2L`, `U2R` 등)을 포함합니다.  
- **파일**:  
  - `KDDTrain+.txt`: 학습용 데이터  
  - `KDDTest+.txt`: 테스트용 데이터  
- **특징**: 41개의 피처(예: `duration`, `protocol_type`, `src_bytes`, `label` 등)와 공격 여부 및 유형을 나타내는 레이블로 구성됩니다.  

## 모델 설명
### 앙상블 이상 탐지
- **모델**: `Isolation Forest`, `One-Class SVM`, `Gaussian Mixture Model(GMM)`  
- **방법**: 정상 데이터를 학습한 후, 각 모델의 이상 탐지 결과를 평균내어 최종 이상 여부를 판단합니다.  
- **특징**: 비지도 학습 방식으로, 비정상 데이터 없이도 이상을 탐지할 수 있습니다.  

### XGBoost 분류기
- **설명**: 탐지된 이상 데이터에 대해 공격 유형을 분류하는 지도 학습 모델입니다.  
- **입력**: 이상으로 판별된 데이터  
- **출력**: 공격 유형(예: `DoS`, `Probe` 등)  
- **특징**: 다중 클래스 분류에 강력한 성능을 발휘합니다.  

## 성능 평가
- **지표**: `F1-Score`  
- **평가 대상**:  
  - 이상 탐지의 정확도  
  - 공격 유형 분류의 정확도  
- **방법**: 테스트 데이터(`KDDTest+.txt`)를 사용해 모델 성능을 측정합니다.  

## 참고 사항
- **데이터셋 경로**: `KDDTrain+.txt`와 `KDDTest+.txt` 파일이 프로젝트 디렉토리에 있어야 합니다.  
- **환경 확인**: 필요한 라이브러리가 모두 설치되어 있는지 확인하세요.  
- **추가 조정**: 필요 시 모델의 하이퍼파라미터를 조정하여 성능을 최적화할 수 있습니다.